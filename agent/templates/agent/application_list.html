{% extends 'agent/base.html' %}

{% block title %}Applications - Agent{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h3><i class="bi bi-file-earmark-text"></i> Applications</h3>
</div>

<div class="card stat-card">
    <div class="card-header bg-white">
        <ul class="nav nav-tabs card-header-tabs" id="agentListTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="list-all-tab" data-bs-toggle="tab" data-bs-target="#list-tab-all" type="button" role="tab">
                    All <span class="badge bg-primary ms-1">{{ total_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-pending-tab" data-bs-toggle="tab" data-bs-target="#list-tab-pending" type="button" role="tab">
                    Pending Review <span class="badge bg-warning text-dark ms-1">{{ pending_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-review-tab" data-bs-toggle="tab" data-bs-target="#list-tab-review" type="button" role="tab">
                    Under Review <span class="badge bg-info ms-1">{{ review_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-approved-tab" data-bs-toggle="tab" data-bs-target="#list-tab-approved" type="button" role="tab">
                    Approved <span class="badge bg-success ms-1">{{ approved_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-letters-tab" data-bs-toggle="tab" data-bs-target="#list-tab-letters" type="button" role="tab">
                    Letters <span class="badge bg-secondary ms-1">{{ letter_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-jw02-tab" data-bs-toggle="tab" data-bs-target="#list-tab-jw02" type="button" role="tab">
                    JW02 <span class="badge bg-secondary ms-1">{{ jw02_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-completed-tab" data-bs-toggle="tab" data-bs-target="#list-tab-completed" type="button" role="tab">
                    Completed <span class="badge bg-dark ms-1">{{ completed_count }}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="list-rejected-tab" data-bs-toggle="tab" data-bs-target="#list-tab-rejected" type="button" role="tab">
                    Rejected <span class="badge bg-danger ms-1">{{ rejected_count }}</span>
                </button>
            </li>
        </ul>
    </div>
    <div class="card-body">
        <div class="tab-content" id="agentListTabsContent">
            <div class="tab-pane fade show active" id="list-tab-all" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=all_applications empty_msg="No applications assigned yet." %}
            </div>
            <div class="tab-pane fade" id="list-tab-pending" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=pending_apps empty_msg="No pending applications." %}
            </div>
            <div class="tab-pane fade" id="list-tab-review" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=in_review_apps empty_msg="No applications under review." %}
            </div>
            <div class="tab-pane fade" id="list-tab-approved" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=approved_apps empty_msg="No approved applications." %}
            </div>
            <div class="tab-pane fade" id="list-tab-letters" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=letter_apps empty_msg="No applications in letter stage." %}
            </div>
            <div class="tab-pane fade" id="list-tab-jw02" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=jw02_apps empty_msg="No applications in JW02 stage." %}
            </div>
            <div class="tab-pane fade" id="list-tab-completed" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=completed_apps empty_msg="No completed applications." %}
            </div>
            <div class="tab-pane fade" id="list-tab-rejected" role="tabpanel">
                {% include 'agent/_app_table_full.html' with applications=rejected_apps empty_msg="No rejected applications." %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
